<?xml version="1.0" encoding="utf-8"?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" autoReload="true" internalLogLevel="error" internalLogFile="NLogInternal.log">
	<!-- Load the ASP.NET Core plugin -->
	<extensions>
		<add assembly="NLog.Web.AspNetCore" />
		<add assembly="NLog.Targets.ElasticSearch" />
	</extensions>
	<!-- the targets to write to -->
	<targets>
		<target xsi:type="File" name="file" maxArchiveDays="7" fileName="/home/works/program/logs/${shortdate}.log">
			<layout xsi:type="JsonLayout" excludeProperties="Comma-separated list (string)">
				<attribute name="longdate" layout="${longdate}" />
				<attribute name="level" layout="${level:upperCase=true}" />
				<attribute name="logger" layout="${logger}" />
				<attribute name="message" layout="${message}" />
				<attribute name="exception" layout="${exception:format=tostring}" IncludeEmptyValue="true" />
			</layout>
		</target>

		<target xsi:type="File"
				name="simple-file"
				maxArchiveDays="7"
				layout="${longdate}|${level:uppercase=true}|${logger}|${message:withexception=true}|${exception:format=tostring}"
				fileName="/app/logs/${shortdate}.log" encoding="utf-8" >
		</target>
		<!-- write to the void aka just remove -->
		<target xsi:type="Null" name="blackhole" />
	</targets>
	<!-- rules to map from logger name to target -->
	<rules>
		<logger name="*" minlevel="Debug" writeTo="simple-file" />
		<logger name="*" minlevel="Info" writeTo="file" />
		<!-- 未记录日志都丢掉 -->
		<logger name="*" minlevel="Trace" writeTo="blackhole" final="true" />
	</rules>
</nlog>
